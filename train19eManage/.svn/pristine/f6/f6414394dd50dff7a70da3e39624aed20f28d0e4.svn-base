<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="channeltj">

	<!-- 获取按条件查询所有 -->
	<select id="queryChanneltjList" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
		SELECT 
		  channel_id,
		  channel,
		  DATE_FORMAT(create_time, '%Y-%m-%d %H:%i:%s') create_time,
		  search_count,
		  search_success,
		  search_fail,
		  msg_count,
		  alter_count,
		  alter_success,
		  alter_fail,
		  refund_count,
		  refund_success,
		  refund_fail,
		  alter_success_cgl,
		  refund_success_cgl
		FROM
		  tj_channel 
		WHERE 1 = 1 
			<dynamic prepend="">
			<isNotEmpty prepend=" and " property="begin_info_time">
				create_time
				<![CDATA[>=]]>
				DATE_FORMAT(#begin_info_time#,'%Y-%m-%d %H:%i:%s')
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="end_info_time">
				create_time
				<![CDATA[<]]>
				DATE_ADD(DATE_FORMAT(#end_info_time#,'%Y-%m-%d
				%H:%i:%s'),INTERVAL 1 DAY)
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="channel">
				channel in
				<iterate open="(" close=")" conjunction=","
					property="channel">
					#channel[]:VARCHAR#
				</iterate>
			</isNotEmpty>
			</dynamic>
		ORDER BY create_time DESC  LIMIT #everyPagefrom:Integer#,#pageSize:Integer#
	</select>
	

	<!-- 获取按条件查询数 -->
	<select id="queryChanneltjCounts"
		parameterClass="java.util.HashMap" resultClass="java.lang.Integer">
		SELECT COUNT(*) FROM tj_channel 
		<dynamic prepend="where">
			<isNotEmpty prepend=" and " property="begin_info_time">
				create_time
				<![CDATA[>=]]>
				DATE_FORMAT(#begin_info_time#,'%Y-%m-%d %H:%i:%s')
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="end_info_time">
				create_time
				<![CDATA[<]]>
				DATE_ADD(DATE_FORMAT(#end_info_time#,'%Y-%m-%d
				%H:%i:%s'),INTERVAL 1 DAY)
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="channel">
				channel in
				<iterate open="(" close=")" conjunction=","
					property="channel">
					#channel[]:VARCHAR#
				</iterate>
			</isNotEmpty>
		</dynamic>
	</select>


	
	<!-- 导出queryChanneltjExcel -->
	<select id="queryChanneltjExcel" parameterClass="java.util.HashMap" resultClass="java.util.HashMap">
			SELECT 
			  channel_id,
			  channel,
			  DATE_FORMAT(create_time, '%Y-%m-%d %H:%i:%s') create_time,
			  search_count,
			  search_success,
			  search_fail,
			  msg_count,
			  alter_count,
			  alter_success,
			  alter_fail,
			  refund_count,
			  refund_success,
			  refund_fail,
			  alter_success_cgl,
			  refund_success_cgl
			FROM
			  tj_channel 
			WHERE 1 = 1 
			<dynamic prepend="">
			<isNotEmpty prepend=" and " property="begin_info_time">
				create_time
				<![CDATA[>=]]>
				DATE_FORMAT(#begin_info_time#,'%Y-%m-%d %H:%i:%s')
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="end_info_time">
				create_time
				<![CDATA[<]]>
				DATE_ADD(DATE_FORMAT(#end_info_time#,'%Y-%m-%d
				%H:%i:%s'),INTERVAL 1 DAY)
			</isNotEmpty>
			<isNotEmpty prepend=" and " property="channel">
				channel in
				<iterate open="(" close=")" conjunction=","
					property="channel">
					#channel[]:VARCHAR#
				</iterate>
			</isNotEmpty>
			</dynamic>
			ORDER BY create_time DESC
	</select>

</sqlMap>