<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kuyou.train.dao.NotifyMapper">

    <update id="updateBookOrder">
        UPDATE
            cp_orderinfo_notify
        SET
            notify_status = 1,
            notify_num = 0,
            notify_next_time = DATE_ADD(now(), INTERVAL 1 SECOND),
            modify_time = NOW(),
            notify_type = 0
        WHERE
            order_id = #{orderId}
    </update>

    <update id="updateBookPay">
        UPDATE
            cp_orderinfo_notify
        SET
            notify_status = 1,
            notify_num = 0,
            notify_next_time = DATE_ADD(now(), INTERVAL 1 SECOND),
            modify_time = NOW(),
            notify_type = 1
        WHERE
            order_id = #{orderId}
    </update>

    <update id="updateBookCancel">
        UPDATE
            cp_orderinfo_notify
        SET
            notify_status = 1,
            notify_num = 0,
            notify_next_time = DATE_ADD(now(), INTERVAL 1 SECOND),
            modify_time = NOW(),
            notify_type = 2
        WHERE
            order_id = #{orderId}
    </update>

    <update id="updateRefund">
    	UPDATE
            cp_orderinfo_refund_notify
        SET
            notify_status = 1,
            notify_type = 1,
            notify_num = 0,
            modify_time = NOW()
        WHERE
            order_id = #{orderId}
            AND cp_id = #{cpId}
    </update>

    <update id="updateChangeOrder">
        UPDATE
            elong_orderinfo_change
        SET
            change_notify_status = '000',
            change_notify_count = 0,
            change_notify_time = NOW()
        WHERE
            change_id = #{changeId}
    </update>

    <update id="updateChangeCancel">
        UPDATE
            elong_orderinfo_change
        SET
            change_notify_status = '000',
            change_notify_count = 0,
            change_notify_time = NOW()
        WHERE
            change_id = #{changeId}
    </update>

    <update id="updateChangePay">
        UPDATE
            elong_orderinfo_change
        SET
            change_notify_status = '000',
            change_notify_count = 0,
            change_notify_time = NOW()
        WHERE
            change_id = #{changeId}
    </update>

</mapper>